<?php
    include ('a-session.php');
?>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROFLab Administrator</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alfa+Slab+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bangers">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bowlby+One+SC">
    <link rel="stylesheet" href="assets/css/footer.css">
    <link rel="stylesheet" href="assets/css/loginform.css">
    <link rel="stylesheet" href="assets/css/popover.css">
    <link rel="stylesheet" href="assets/css/previewratings.css">
    <link rel="stylesheet" href="assets/css/registrationform.css">
    <link rel="stylesheet" href="assets/css/sidebar-menu.css">
    <link rel="stylesheet" href="assets/css/sidebar-admin.css">
    <link rel="stylesheet" href="assets/css/starratings.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="shortcut icon" type="image/png" href="assets/img/favicon.png" />
	<script src="assets/js/jquery.min.js"></script>
	

	 <script>
        $(document).ready(function() {
            //using $.ajax() function
                $(document).on('submit', '#updatejoke', function () {
                    //get variables from registration form
                    var nsfc = $('input[name=nsfc]:checked').val();
                    var joketype = $('#joketype').text();
                    var jokedesc=document.getElementById('jokedesc').value;
					var jokeID = $('#jokeID').html();

                    $.ajax({
                        url: 'a-ujoke.php',
                        type: 'post',
                        data: {
                            nsfc: nsfc,
                            joketype: joketype,
                            jokedesc: jokedesc,
							jokeID: jokeID
							
                        },
                        success: function(message) {						
                            alert(message); 
							window.location = "a-mod-data.html";	
                        }
                    });
                    return false;
                });
        });
    </script>
</head>
<body>		
<div class="contact-clean">			
			<form method='post' id='updatejoke' name='updatejoke'>
				<div class="col"><label class="col-form-label">Update Joke ID: <a id='jokeID'><?php echo $_GET['id'];?></a> in the Database</label></div>
				<hr>
				<div class="form-row"><label>Not Safe For Children</label></div>
				<div class="form-row">
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" id="1" name="nsfc" value="1"><label class="form-check-label" for="1">Yes</label></div>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" id="0" name="nsfc" value="0"><label class="form-check-label" for="0">No</label></div>
				</div>
				<hr>
				<div class="form-row">
					<div class="col"><label class="col-form-label">Joke Description</label></div>
					<div class='form-row'><textarea class='form-control' type='textarea' name='jokedesc' id='jokedesc'><?php include ("getupJoke.php");?></textarea>
					</div>
				</div>
			
				<div class="form-row">
					<div class="col"><label class="col-form-label">Joke Type</label>
						<div class="dropdown">
							<button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button" style="margin-top:0px;" id="joketype">Select Joke Type</button>
							<div class="dropdown-menu dp-style" role="menu">
								<?php
									include ('getJokeTypes.php');
								?>                      
							</div>
						</div>
					</div>
				</div>
			  <div class="form-group d-flex justify-content-center"><button class="btn btn-primary" type="submit" id="submit">Update</button></div>
			</form>
</div>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/a-popover.js"></script>
<script src="assets/js/add-rem-elements.js"></script>
<script src="assets/js/dropdown.js"></script>
<script src="assets/js/sidebar-menu.js"></script>
<script src="assets/js/u-popover.js"></script>
<script src="assets/js/selectdropdown.js"></script>
			</body>
</html>